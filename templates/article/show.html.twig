{% extends 'base.html.twig' %}

{% block title %}Article
{% endblock %}

{% block body %}
	<div class="container py-5">
		<div class="d-flex justify-content-between align-items-start mb-3">
			<div>
				<h1 class="h3 mb-0">{{ article.title }}</h1>
				<div class="small text-muted">{{ article.createdAt ? article.createdAt|date('M d, Y') : '' }}
					{% if article.author %}
						• Par
						<strong>{{ article.author.userIdentifier }}</strong>
					{% endif %}
				</div>
			</div>
			<div class="text-end">
				<a href="{{ path('app_list_article') }}" class="btn btn-outline-secondary btn-sm me-2">Retour</a>
				{% if app.user and article.author and app.user.id == article.author.id %}
					<a href="{{ path('app_article_edit', {'slug': article.slug}) }}" class="btn btn-primary btn-sm me-2">Éditer</a>
					{{ include('article/_delete_form.html.twig', {button_class: 'btn btn-outline-danger btn-sm', button_label: 'Supprimer', confirm_message: 'Confirmer la suppression de cet article ?'}) }}
				{% endif %}
			</div>
		</div>

		<div class="row g-4">
			<div class="col-12 col-lg-8">
				<article class="card shadow-sm">
					{% if article.imagePath %}
						<img src="{{ asset(article.imagePath) }}" class="card-img-top" alt="{{ article.title }}" style="height:320px;object-fit:cover;">
					{% endif %}
					<div class="card-body">
						<div class="lead mb-3">{{ article.content|nl2br }}</div>
					</div>
				</article>
			</div>

			<div class="col-12 col-lg-4">
				<aside class="card h-100">
					<div class="card-body">
						<h6 class="card-title">Détails</h6>
						<dl class="row">
							<dt class="col-6">Slug</dt>
							<dd class="col-6">
								<code>{{ article.slug }}</code>
							</dd>

							<dt class="col-6">Créé</dt>
							<dd class="col-6">{{ article.createdAt ? article.createdAt|date('Y-m-d H:i') : '' }}</dd>

							<dt class="col-6">Mis à jour</dt>
							<dd class="col-6">{{ article.updatedAt ? article.updatedAt|date('Y-m-d H:i') : '—' }}</dd>
						</dl>
					</div>
				</aside>
			</div>
		</div>
	</div>
{% endblock %}
